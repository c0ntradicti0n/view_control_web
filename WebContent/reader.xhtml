<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Document Reader</title>
</h:head>


<h:body>
    <h:outputScript name="javascript/selection.js" target="body"/>
    <h:outputScript name="javascript/mark.js" target="body"/>
    <h:outputScript name="javascript/mark_new.js" target="body"/>


    <h:outputStylesheet name="css/format.css"/>
    <h:outputStylesheet name="css/diff_markup.css"/>
    <h:outputStylesheet name="css/nav.css"/>

    <div id="controls">


        <h:form id="xorm">
            <p:remoteCommand name="rc" action="#{ccPyBean.updateAnnotation}"/>

            <p:commandLink id="annotate"
                           onclick="rc([{'name':'selectedText','value':getSelectionText()}]);">
                <h:graphicImage name="images/annotate.png" ajax="false"
                                styleClass="sm_img_button"/>

            </p:commandLink>
            <p:tooltip id="toolTipGrow" for="annotate"
                       value="Select some text with your mouse and teach our artificial intelligence to recognize it"
                       showEffect="clip" hideEffect="explode" position="left"/>


            <p:commandLink id="train" action="trainer" rendered="#{ccPyBean.loggedIn}">
                <h:graphicImage name="images/ai.png" ajax="false"
                                styleClass="sm_img_button"/>

            </p:commandLink>

            <p:commandLink id="welcome" action="index">
                <h:graphicImage name="images/welcome.png" ajax="false"
                                styleClass="sm_img_button"/>
            </p:commandLink>
            <p:tooltip id="toolTipGrowWelc" for="welcome"
                       value="Go back to welcome page"
                       showEffect="clip" hideEffect="explode" position="left"/>

            <p:commandLink id="login" action="login" rendered="#{!ccPyBean.loggedIn}">
                <h:graphicImage name="images/desperate.png" ajax="false"
                                styleClass="sm_img_button"/>

            </p:commandLink>
            <p:tooltip id="toolTipGrowLogin" for="login"
                       value="Login for using the administration buttons (new corpus, model, videos etc.)"
                       showEffect="clip" hideEffect="explode" position="left"/>

        </h:form>


        <h:form>
            <p:growl id="msgs" showDetail="true" escape="false"/>
            <!--
                        <h:panelGroup id="metadata" rendered="#{ccPyBean.path!=null}">
                            <b>Shown Document </b>
                            <h:outputText id="out" value="#{ccPyBean.path}" />
                        </h:panelGroup>
                        -->
            <div id="selectionLog" style="display:none;"></div>


            <p:treeTable value="#{DocumentBean.root}" var="doc"
                         style="margin-top:0" scrollable="true" scrollHeight="50vh">
                <p:column headerText="Uploaded documents">
                    <p:commandLink action="#{DocumentBean.displaySelectedNode(doc.name)}"
                    update="text" oncomplete="markup()">                    <h:outputText value="#{doc.name}" />
                    </p:commandLink>
                </p:column>
            </p:treeTable>

            <p:treeTable value="#{diffBean.root}" var="doc"
                         style="margin-top:0" scrollable="true" scrollHeight="10vh">
                <p:column headerText="differencebetween.net-documents">
                    <p:commandLink action="#{diffBean.displaySelectedNode(doc.name)}"
                                   update="text">                    <h:outputText value="#{doc.name}" />
                    </p:commandLink>
                </p:column>
            </p:treeTable>
        </h:form>

        <h:form enctype="multipart/form-data">
            Please upload only documents, that can legally be here!

            <p:fileUpload fileUploadListener="#{fileUploadView.upload}"
                          auto="true" label="Upload new Document"/>

        </h:form>
        <table>
            <tr>
                <th><h5>Legend</h5></th>
                <th>level/kind</th>
                <th>subject</th>
                <th>contrast</th>
            </tr>
            <tr>
                <th></th>
                <th>1</th>
                <th><span class="subject level1 subject1">subject</span></th>
                <th><span class="contrast level1 contrast1">contrast</span></th>
            </tr>
            <tr>
                <th></th>
                <th>2</th>
                <th><span class="subject level2 subject2">subject</span></th>
                <th><span class="contrast level2 contrast2">contrast</span></th>
            </tr>
            <tr>
                <th></th>
                <th>3</th>
                <th><span class="subject level3 subject3">subject</span></th>
                <th><span class="contrast level3 contrast3">contrast</span></th>
            </tr>
        </table>


    </div>


    <h:panelGroup id="text" rendered="#{ccPyBean.path!=null}" onload="">

        <div id="text_window">
            <h:outputText value="#{ccPyBean.html}" escape="false"/>
        </div>


    </h:panelGroup>


</h:body>
</html>
