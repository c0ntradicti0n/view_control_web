<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Document Reader</title>
</h:head>


<h:body>
	<h:outputScript name="javascript/selection.js" target="body" />

	<h:outputStylesheet name="css/format.css" />
	<h:outputStylesheet name="css/diff_markup.css" />
	<h:outputStylesheet name="css/nav.css" />

	<div id="controls">


		<h:form id="xorm">
			<p:remoteCommand name="rc" action="#{ccPyBean.updateAnnotation}" />

			<p:commandLink id="annotate"
						   onclick="rc([{'name':'selectedText','value':getSelectionText()}]);">
				<h:graphicImage name="images/annotate.png" ajax="false"
								styleClass="img_button" />

			</p:commandLink>
			<p:tooltip id="toolTipGrow" for="annotate"
					   value="Select some text with your mouse and teach the semi-AI to recognize it"
					   showEffect="clip" hideEffect="explode" position="left" />


			<p:commandLink id="train" action="trainer" rendered="#{ccPyBean.loggedIn}">
				<h:graphicImage name="images/ai.png" ajax="false"
								styleClass="img_button" />

			</p:commandLink>

			<p:commandLink id="welcome" action="index">
				<h:graphicImage name="images/welcome.png" ajax="false"
								styleClass="img_button" />
			</p:commandLink>
			<p:tooltip id="toolTipGrowWelc" for="welcome"
					   value="Go back to welcome page"
					   showEffect="clip" hideEffect="explode" position="left" />

			<p:commandLink id="login" action="login" rendered="#{!ccPyBean.loggedIn}">
				<h:graphicImage name="images/desperate.png" ajax="false"
								styleClass="img_button" />

			</p:commandLink>
			<p:tooltip id="toolTipGrowLogin" for="login"
					   value="For using the administration buttons (new corpus, model, videos etc.)"
					   showEffect="clip" hideEffect="explode" position="left" />

		</h:form>


		<h:form>
			<p:growl id="msgs" showDetail="true" escape="false" />
			<h3>Documents</h3>
			<h:panelGroup id="metadata" rendered="#{ccPyBean.path!=null}">
				<b>Shown Document </b>
				<h:outputText id="out" value="#{ccPyBean.path}" />
			</h:panelGroup>
			<div id="selectionLog" style="display:none;"></div>

			<p:tree value="#{navBean.root}" var="doc" selectionMode="single"
				selection="#{navBean.singleSelectedNode}">
				<p:treeNode icon="ui-icon-document">
					<h:outputText value="#{doc.name}" />
				</p:treeNode>
				<p:ajax event="select"
					listener="#{ccPyBean.displaySelectedNode(navBean.singleSelectedNode)}"
					update="text" />

			</p:tree>
		</h:form>

		<h:form enctype="multipart/form-data">
			<p:fileUpload fileUploadListener="#{fileUploadView.upload}"
				auto="true" label="Upload new Document" />
		</h:form>

		<h:form>
			<h:panelGroup id="active">
			    REST 
				<h:graphicImage rendered="#{ccPyBean.restActive==false}"
					name="images/ping_off.png" styleClass="sm_img_status" />
				<h:graphicImage rendered="#{ccPyBean.restActive==true}"
					name="images/ping_on.png" styleClass="sm_img_status" />
				PREDICTION
				<h:graphicImage rendered="#{ccPyBean.annoActive==false}"
					name="images/ping_off.png" styleClass="sm_img_status" />
				<h:graphicImage rendered="#{ccPyBean.annoActive==true}"
					name="images/ping_on.png" styleClass="sm_img_status" />
				TRAIN
				<h:graphicImage rendered="#{ccPyBean.trainActive==false}"
					name="images/ping_off.png" styleClass="sm_img_status" />
				<h:graphicImage rendered="#{ccPyBean.trainActive==true}"
					name="images/ping_on.png" styleClass="sm_img_status" />

			</h:panelGroup>
		</h:form>

	</div>


	<h:panelGroup id="text" rendered="#{ccPyBean.path!=null}">

		<div id="text_window">
			<h:outputText value="#{ccPyBean.html}" escape="false" />
		</div>

	</h:panelGroup>



</h:body>
</html>
